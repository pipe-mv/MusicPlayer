{"ast":null,"code":"var _jsxFileName = \"/Users/pipemv/Desktop/final-project/src/components/SongSearch.js\",\n    _s = $RefreshSig$();\n\nimport { SongTest } from \"./DataTes\";\nimport React, { useState } from \"react\";\nimport { useEffect } from \"react\";\nimport { HashRouter, Link, Switch, Route } from \"react-router-dom\";\nimport FavSongTable from \"./FavSongsTable\";\nimport SongDetails from \"./SongDetails\";\nimport SongForm from \"./SongForm\";\nimport SongPage from \"./SongPage\";\nimport Loader from \"../images/Loader\";\nimport { helpHttp } from \"../helpers/helpHttp\";\nimport _ from \"lodash\";\nimport Error404 from \"../pages/Error404\"; // import ImageSlider from \"./Slider\";\n\nimport \"../css/App.css\";\nimport Logo from \"../images/Logo.png\";\nimport HomeLogo from \"../images/home2.png\";\nimport Footer from \"./Footer\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst mySongsInit = JSON.parse(localStorage.getItem(\"mySongs\")) || []; // console.log(SongTest.items[0]);\n\nconst SongSearch = () => {\n  _s();\n\n  //Controls the singer and song search, if there's not singer or song it will be kept \"null\" in order to not show the artist\n  const [search, setsearch] = useState(null); //Handles the lyric of the artist's song\n\n  const [lyric, setLyric] = useState(null); //Saves the information of the artist\n\n  const [bio, setBio] = useState(null); //Saves my song to my favorites\n\n  const [mySongs, setMySongs] = useState(mySongsInit); //Handles the loading cirlce image\n\n  const [loading, setLoading] = useState(false); //Handles the YouTube url with the song information\n\n  const [song, setSong] = useState(\"\");\n  console.log(song);\n  useEffect(() => {\n    if (search === \"\") return;\n\n    const fetchData = async () => {\n      const {\n        artist,\n        song\n      } = search;\n      let artistUrl = `https://www.theaudiodb.com/api/v1/json/2/search.php?s=${artist}`;\n      let songUrl = `https://api.lyrics.ovh/v1/${artist}/${song}`; // let songUrl = `https://private-anon-9f7bebbbf5-lyricsovh.apiary-proxy.com/v1/${artist}/${song}`;\n\n      let playerSearch = `https://www.googleapis.com/youtube/v3/search?maxResults=1&relevanceLanguage=en&regionCode=AU&topicId=/m/04rlf&part=snippet&q=${artist}%20${song}&key=AIzaSyCx0_c96ixoYzQUcp_0tgct7hI-PVoO6EU`;\n      console.log(playerSearch); // let urlId = `https://www.googleapis.com/youtube/v3/videos?part=snippet,contentDetails,statistics&id=yKNxeF4KMsY&key=AIzaSyDwGncvc42OOpdNBOmH1bj55AzcAKtFOZg`\n      // console.log(playerSong);\n\n      setLoading(true); //   fetch(artistUrl)\n      //     .then((res) => res.json())\n      //     .then(\n      //       (result) => {\n      //         console.log(\"Artist is working\");\n      //         // console.log(result);\n      //         setBio(result);\n      //       },\n      //       (error) => {\n      //         console.log(\"There is an error Artist\");\n      //       }\n      //     );\n      //   fetch(songUrl)\n      //     .then((res) => res.json())\n      //     .then(\n      //       (result) => {\n      //         console.log(\"Song is working\");\n      //         // console.log(result);\n      //         setLyric(result);\n      //       },\n      //       (error) => {\n      //         console.log(\"There is an error in Song\");\n      //       }\n      //     );\n      // }, [search]);\n      // let songId = \"\"\n\n      const [artistRes, songRes, playerRes] = await Promise.all([helpHttp().get(artistUrl), helpHttp().get(songUrl), helpHttp().get(playerSearch)]); // console.log(songId);\n\n      console.log(artistRes, songRes, playerRes);\n\n      let songId = _.map(playerRes.items, video => {\n        if (video.id.kind === \"youtube#video\") {\n          console.log(\"something\"); // let urlId = `https://www.googleapis.com/youtube/v3/videos?part=snippet,contentDetails,statistics&id=${video.id.videoId}&key=AIzaSyDwGncvc42OOpdNBOmH1bj55AzcAKtFOZg`;\n\n          let urlId = SongTest;\n          console.log(urlId);\n          return urlId;\n        }\n      }); // console.log(songId);\n\n\n      const [idRes] = await Promise.all([helpHttp().get(songId)]);\n      console.log(idRes);\n      setBio(artistRes);\n      setLyric(songRes);\n      setSong(idRes);\n      setLoading(false);\n    };\n\n    fetchData();\n    localStorage.setItem(\"mySongs\", JSON.stringify(mySongs));\n  }, [search, mySongs]); // }, []);\n\n  console.log(song); // const video = (song) => {\n  //   if (song === null) {\n  //     return;\n  //   } else if (song !== null) {\n  //     song.items.map((item) => {\n  //       console.log(\"item\", item);\n  //       const { id, snippet = {} } = item;\n  //       const { title, thumbnails = {}, resourceId } = snippet;\n  //       const { medium = {} } = thumbnails;\n  //       return (\n  //       <li key={id}>\n  //         <a href={`https://www.youtube.com/watch?v=${resourceId.videoId}`}>\n  //           <p>\n  //             <img width={medium.width} height={medium.height} src={medium.url} alt={`${search.artist} ${search.song}`} />\n  //           </p>\n  //           <h3>{title}</h3>\n  //         </a>\n  //       </li>);\n  //     });\n  //     const video = song.items;\n  //     console.log(video);\n  //     //  const videoSrc = `https://www.youtube.com/embed/${video.id.videoId}`\n  //   }\n  // };\n\n  const handleSearch = data => {\n    console.log(data);\n    setsearch(data);\n  };\n\n  console.log(search);\n  console.log(lyric);\n  console.log(bio);\n\n  const handleSaveSong = () => {\n    if (lyric.err === true || bio.artists === null) {\n      return alert(\"The song can not be saved, Try it again!\");\n    } // console.log(\"saving the song to favorites\");\n\n\n    let currentSong = {\n      search,\n      lyric,\n      bio\n    };\n    let songs = [...mySongs, currentSong];\n    setMySongs(songs); // setSearch(null);\n\n    localStorage.setItem(\"mySongs\", JSON.stringify(songs));\n  };\n\n  const handleDeleteSong = id => {\n    let isDelete = window.confirm(`¿Are you sure of deleting this wonderful song?`);\n\n    if (isDelete) {\n      let songs = mySongs.filter((song, index) => index !== id);\n      setMySongs(songs);\n      localStorage.setItem(\"mySongs\", JSON.stringify(songs));\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(HashRouter, {\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"logo\",\n        src: Logo,\n        alt: \"Music logo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container mt-5 carousel\",\n        children: /*#__PURE__*/_jsxDEV(FavSongTable, {\n          mySongs: mySongs,\n          handleDeleteSong: handleDeleteSong\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"header\", {\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          className: \"selected\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"homeIcon\",\n            src: HomeLogo,\n            alt: \"home\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this), loading && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"article\", {\n        children: /*#__PURE__*/_jsxDEV(Switch, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Song Search\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(SongForm, {\n              handleSearch: handleSearch,\n              handleSaveSong: handleSaveSong // songs={song}\n\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 15\n            }, this), search && !loading && /*#__PURE__*/_jsxDEV(SongDetails, {\n              search: search,\n              lyric: lyric,\n              bio: bio,\n              song: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/:id\",\n            children: /*#__PURE__*/_jsxDEV(SongPage, {\n              mySongs: mySongs\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"*\",\n            children: /*#__PURE__*/_jsxDEV(Error404, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 39\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 181,\n    columnNumber: 5\n  }, this);\n};\n\n_s(SongSearch, \"QE1xaUTKYMy/VcDPYRRiu4RKHdg=\");\n\n_c = SongSearch;\nexport default SongSearch;\n\nvar _c;\n\n$RefreshReg$(_c, \"SongSearch\");","map":{"version":3,"sources":["/Users/pipemv/Desktop/final-project/src/components/SongSearch.js"],"names":["SongTest","React","useState","useEffect","HashRouter","Link","Switch","Route","FavSongTable","SongDetails","SongForm","SongPage","Loader","helpHttp","_","Error404","Logo","HomeLogo","Footer","mySongsInit","JSON","parse","localStorage","getItem","SongSearch","search","setsearch","lyric","setLyric","bio","setBio","mySongs","setMySongs","loading","setLoading","song","setSong","console","log","fetchData","artist","artistUrl","songUrl","playerSearch","artistRes","songRes","playerRes","Promise","all","get","songId","map","items","video","id","kind","urlId","idRes","setItem","stringify","handleSearch","data","handleSaveSong","err","artists","alert","currentSong","songs","handleDeleteSong","isDelete","window","confirm","filter","index"],"mappings":"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","sourcesContent":["import { SongTest } from \"./DataTes\";\nimport React, { useState } from \"react\";\nimport { useEffect } from \"react\";\nimport { HashRouter, Link, Switch, Route } from \"react-router-dom\";\nimport FavSongTable from \"./FavSongsTable\";\nimport SongDetails from \"./SongDetails\";\nimport SongForm from \"./SongForm\";\nimport SongPage from \"./SongPage\";\nimport Loader from \"../images/Loader\";\nimport { helpHttp } from \"../helpers/helpHttp\";\nimport _ from \"lodash\";\nimport Error404 from \"../pages/Error404\";\n// import ImageSlider from \"./Slider\";\nimport \"../css/App.css\";\nimport Logo from \"../images/Logo.png\";\nimport HomeLogo from \"../images/home2.png\";\nimport Footer from \"./Footer\";\n\nconst mySongsInit = JSON.parse(localStorage.getItem(\"mySongs\")) || [];\n\n// console.log(SongTest.items[0]);\n\nconst SongSearch = () => {\n  //Controls the singer and song search, if there's not singer or song it will be kept \"null\" in order to not show the artist\n  const [search, setsearch] = useState(null);\n  //Handles the lyric of the artist's song\n  const [lyric, setLyric] = useState(null);\n  //Saves the information of the artist\n  const [bio, setBio] = useState(null);\n  //Saves my song to my favorites\n  const [mySongs, setMySongs] = useState(mySongsInit);\n  //Handles the loading cirlce image\n  const [loading, setLoading] = useState(false);\n  //Handles the YouTube url with the song information\n  const [song, setSong] = useState(\"\");\n\n  console.log(song);\n\n  useEffect(() => {\n    if (search === \"\") return;\n\n    const fetchData = async () => {\n      const { artist, song } = search;\n\n      let artistUrl = `https://www.theaudiodb.com/api/v1/json/2/search.php?s=${artist}`;\n      let songUrl = `https://api.lyrics.ovh/v1/${artist}/${song}`;\n      // let songUrl = `https://private-anon-9f7bebbbf5-lyricsovh.apiary-proxy.com/v1/${artist}/${song}`;\n      let playerSearch = `https://www.googleapis.com/youtube/v3/search?maxResults=1&relevanceLanguage=en&regionCode=AU&topicId=/m/04rlf&part=snippet&q=${artist}%20${song}&key=AIzaSyCx0_c96ixoYzQUcp_0tgct7hI-PVoO6EU`;\n      console.log(playerSearch);\n      // let urlId = `https://www.googleapis.com/youtube/v3/videos?part=snippet,contentDetails,statistics&id=yKNxeF4KMsY&key=AIzaSyDwGncvc42OOpdNBOmH1bj55AzcAKtFOZg`\n      // console.log(playerSong);\n\n      setLoading(true);\n      //   fetch(artistUrl)\n      //     .then((res) => res.json())\n      //     .then(\n      //       (result) => {\n      //         console.log(\"Artist is working\");\n      //         // console.log(result);\n      //         setBio(result);\n      //       },\n      //       (error) => {\n      //         console.log(\"There is an error Artist\");\n      //       }\n      //     );\n\n      //   fetch(songUrl)\n      //     .then((res) => res.json())\n      //     .then(\n      //       (result) => {\n      //         console.log(\"Song is working\");\n      //         // console.log(result);\n      //         setLyric(result);\n      //       },\n      //       (error) => {\n      //         console.log(\"There is an error in Song\");\n      //       }\n      //     );\n      // }, [search]);\n      // let songId = \"\"\n      const [artistRes, songRes, playerRes] = await Promise.all([\n        helpHttp().get(artistUrl),\n        helpHttp().get(songUrl),\n        helpHttp().get(playerSearch),\n      ]);\n      // console.log(songId);\n      console.log(artistRes, songRes, playerRes);\n\n      let songId = _.map(playerRes.items, (video) => {\n        if (video.id.kind === \"youtube#video\") {\n          console.log(\"something\");\n          // let urlId = `https://www.googleapis.com/youtube/v3/videos?part=snippet,contentDetails,statistics&id=${video.id.videoId}&key=AIzaSyDwGncvc42OOpdNBOmH1bj55AzcAKtFOZg`;\n          let urlId = SongTest\n          console.log(urlId);\n          return urlId;\n        }\n      });\n\n      // console.log(songId);\n\n      const [idRes] = await Promise.all([helpHttp().get(songId)]);\n\n      console.log(idRes);\n\n      setBio(artistRes);\n      setLyric(songRes);\n      setSong(idRes);\n      setLoading(false);\n    };\n    fetchData();\n    localStorage.setItem(\"mySongs\", JSON.stringify(mySongs));\n  }, [search, mySongs]);\n  // }, []);\n\n  console.log(song);\n  // const video = (song) => {\n  //   if (song === null) {\n  //     return;\n  //   } else if (song !== null) {\n  //     song.items.map((item) => {\n  //       console.log(\"item\", item);\n  //       const { id, snippet = {} } = item;\n  //       const { title, thumbnails = {}, resourceId } = snippet;\n  //       const { medium = {} } = thumbnails;\n  //       return (\n  //       <li key={id}>\n  //         <a href={`https://www.youtube.com/watch?v=${resourceId.videoId}`}>\n  //           <p>\n  //             <img width={medium.width} height={medium.height} src={medium.url} alt={`${search.artist} ${search.song}`} />\n  //           </p>\n  //           <h3>{title}</h3>\n  //         </a>\n  //       </li>);\n  //     });\n  //     const video = song.items;\n  //     console.log(video);\n  //     //  const videoSrc = `https://www.youtube.com/embed/${video.id.videoId}`\n  //   }\n  // };\n\n  const handleSearch = (data) => {\n    console.log(data);\n    setsearch(data);\n  };\n\n  console.log(search);\n  console.log(lyric);\n  console.log(bio);\n\n  const handleSaveSong = () => {\n    if (lyric.err === true || bio.artists === null) {\n      return alert(\"The song can not be saved, Try it again!\");\n    }\n\n    // console.log(\"saving the song to favorites\");\n    let currentSong = {\n      search,\n      lyric,\n      bio,\n    };\n\n    let songs = [...mySongs, currentSong];\n    setMySongs(songs);\n    // setSearch(null);\n    localStorage.setItem(\"mySongs\", JSON.stringify(songs));\n  };\n\n  const handleDeleteSong = (id) => {\n    let isDelete = window.confirm(\n      `¿Are you sure of deleting this wonderful song?`\n    );\n\n    if (isDelete) {\n      let songs = mySongs.filter((song, index) => index !== id);\n      setMySongs(songs);\n      localStorage.setItem(\"mySongs\", JSON.stringify(songs));\n    }\n  };\n\n  return (\n    <div>\n      <HashRouter>\n        <img className=\"logo\" src={Logo} alt=\"Music logo\"></img>\n\n        <div className=\"container mt-5 carousel\">\n          <FavSongTable mySongs={mySongs} handleDeleteSong={handleDeleteSong} />\n        </div>\n\n        <header>\n          <Link to=\"/\" className=\"selected\">\n            <img className=\"homeIcon\" src={HomeLogo} alt=\"home\" />\n          </Link>\n        </header>\n        {loading && <Loader />}\n        {/* {song} */}\n        <article>\n          <Switch>\n            <Route exact path=\"/\">\n              <h2>Song Search</h2>\n              <SongForm\n                handleSearch={handleSearch}\n                handleSaveSong={handleSaveSong}\n                // songs={song}\n              />\n              {search && !loading && (\n                <SongDetails search={search} lyric={lyric} bio={bio} song/>\n              )}\n            </Route>\n            <Route\n              exact\n              path=\"/:id\"\n              children={<SongPage mySongs={mySongs} />}\n            ></Route>\n            <Route path=\"*\" children={<Error404 />} />\n          </Switch>\n        </article>\n        <Footer />\n      </HashRouter>\n    </div>\n  );\n};\n\nexport default SongSearch;\n"]},"metadata":{},"sourceType":"module"}