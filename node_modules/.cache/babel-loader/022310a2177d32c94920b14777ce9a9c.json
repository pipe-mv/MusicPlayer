{"ast":null,"code":"import _toConsumableArray from\"/Users/pipemv/Desktop/final-project/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/pipemv/Desktop/final-project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/pipemv/Desktop/final-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/pipemv/Desktop/final-project/node_modules/@babel/runtime/regenerator/index.js\";// import { SongTest } from \"./DataTes\";\nimport React,{useState}from\"react\";import{useEffect}from\"react\";import{HashRouter,Link,Switch,Route}from\"react-router-dom\";import FavSongTable from\"./FavSongsTable\";import SongDetails from\"./SongDetails\";import SongForm from\"./SongForm\";import SongPage from\"./SongPage\";import Loader from\"../images/Loader\";import{helpHttp}from\"../helpers/helpHttp\";// import _ from \"lodash\";\nimport Error404 from\"../pages/Error404\";// import ImageSlider from \"./Slider\";\nimport\"../css/App.css\";import Logo from\"../images/Logo.png\";import HomeLogo from\"../images/home2.png\";import Footer from\"./Footer\";// console.log(process.env);\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var YOUTUBE_API=process.env.REACT_APP_YOUTUBE_API_KEY;var mySongsInit=JSON.parse(localStorage.getItem(\"mySongs\"))||[];// console.log(SongTest.items[0]);\nvar SongSearch=function SongSearch(){//Controls the singer and song search, if there's not singer or song it will be kept \"null\" in order to not show the artist\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),search=_useState2[0],setSearch=_useState2[1];//Handles the lyric of the artist's song\nvar _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),lyric=_useState4[0],setLyric=_useState4[1];//Handles the information of the artist\nvar _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),bio=_useState6[0],setBio=_useState6[1];//Handles the informatin about the YouTube id\nvar _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),youTubeId=_useState8[0],setYouTubeId=_useState8[1];//Saves my song to my favorites\nvar _useState9=useState(mySongsInit),_useState10=_slicedToArray(_useState9,2),mySongs=_useState10[0],setMySongs=_useState10[1];//Handles the loading cirlce image\nvar _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),loading=_useState12[0],setLoading=_useState12[1];//Handles the YouTube url with the song information\nvar _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),songYouTube=_useState14[0],setSongYouTube=_useState14[1];//handles the favorite song selected from the carousel\nvar _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),favIdSelected=_useState16[0],setFavIdSelected=_useState16[1];console.log(songYouTube);useEffect(function(){if(search===\"\")return;var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var artist,song,artistUrl,songUrl,playerSearch,_yield$Promise$all,_yield$Promise$all2,artistRes,songRes,playerRes;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:artist=search.artist,song=search.song;artistUrl=\"https://www.theaudiodb.com/api/v1/json/2/search.php?s=\".concat(artist);songUrl=\"https://api.lyrics.ovh/v1/\".concat(artist,\"/\").concat(song);playerSearch=\"https://www.googleapis.com/youtube/v3/search?maxResults=1&relevanceLanguage=en&regionCode=AU&topicId=/m/04rlf&part=snippet&q=\".concat(artist,\"%20\").concat(song,\"&key=\").concat(YOUTUBE_API);console.log(playerSearch);setLoading(true);//   fetch(artistUrl)\n//     .then((res) => res.json())\n//     .then(\n//       (result) => {\n//         console.log(\"Artist is working\");\n//         // console.log(result);\n//         setBio(result);\n//       },\n//       (error) => {\n//         console.log(\"There is an error Artist\");\n//       }\n//     );\n//   fetch(songUrl)\n//     .then((res) => res.json())\n//     .then(\n//       (result) => {\n//         console.log(\"Song is working\");\n//         // console.log(result);\n//         setLyric(result);\n//       },\n//       (error) => {\n//         console.log(\"There is an error in Song\");\n//       }\n//     );\n// }, [search]);\n// let songId = \"\"\n_context.next=8;return Promise.all([helpHttp().get(artistUrl),helpHttp().get(songUrl)// helpHttp().get(playerSearch),\n]);case 8:_yield$Promise$all=_context.sent;_yield$Promise$all2=_slicedToArray(_yield$Promise$all,2);artistRes=_yield$Promise$all2[0];songRes=_yield$Promise$all2[1];// console.log(songId);\nconsole.log(artistRes,songRes);setBio(artistRes);setLyric(songRes);if(!(songRes.err===true||artistRes.artists===null)){_context.next=19;break;}console.log(\"error before loading api 1\");setLoading(false);return _context.abrupt(\"return\");case 19:_context.next=21;return Promise.all([helpHttp().get(playerSearch)]);case 21:playerRes=_context.sent;console.log(playerRes);// let songId = _.map(playerRes.items, (video) => {\n//   if (video.id.kind === \"youtube#video\") {\n//     console.log(\"something\", video);\n//     let urlId = `https://www.googleapis.com/youtube/v3/videos?part=snippet,contentDetails,statistics&id=${video.id.videoId}&key=AIzaSyCx0_c96ixoYzQUcp_0tgct7hI-PVoO6EU`;\n//     // let urlId = SongTest\n//     console.log(urlId);\n//     return urlId;\n//   }\n// });\n// const idRes = await Promise.all([helpHttp().get(songId)]);\n// console.log(songId);\n// console.log(idRes);\n// setSongYouTube(idRes);\nsetSongYouTube(playerRes[0]);setYouTubeId(playerRes[0].items[0].id.videoId);setLoading(false);case 26:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();localStorage.setItem(\"mySongs\",JSON.stringify(mySongs));},[search,mySongs]);// }, []);\nconsole.log(songYouTube);// const video = (song) => {\n//   if (song === null) {\n//     return;\n//   } else if (song !== null) {\n//     song.items.map((item) => {\n//       console.log(\"item\", item);\n//       const { id, snippet = {} } = item;\n//       const { title, thumbnails = {}, resourceId } = snippet;\n//       const { medium = {} } = thumbnails;\n//       return (\n//       <li key={id}>\n//         <a href={`https://www.youtube.com/watch?v=${resourceId.videoId}`}>\n//           <p>\n//             <img width={medium.width} height={medium.height} src={medium.url} alt={`${search.artist} ${search.song}`} />\n//           </p>\n//           <h3>{title}</h3>\n//         </a>\n//       </li>);\n//     });\n//     const video = song.items;\n//     console.log(video);\n//     //  const videoSrc = `https://www.youtube.com/embed/${video.id.videoId}`\n//   }\n// };\nvar handleSearch=function handleSearch(data){console.log(data);setSearch(data);};console.log(search);console.log(lyric);console.log(bio);console.log(youTubeId);var handleSaveSong=function handleSaveSong(){if(lyric.err===true||bio.artists===null){return alert(\"The song can not be saved, Try it again!\");}// console.log(\"saving the song to favorites\");\nvar currentSong={search:search,lyric:lyric,bio:bio,songYouTube:songYouTube};var songs=[].concat(_toConsumableArray(mySongs),[currentSong]);setMySongs(songs);// setSearch(null);\nlocalStorage.setItem(\"mySongs\",JSON.stringify(songs));};var handleDeleteSong=function handleDeleteSong(id){var isDelete=window.confirm(\"\\xBFAre you sure of deleting this wonderful song?\");if(isDelete){var songs=mySongs.filter(function(song,index){return index!==id;});setMySongs(songs);localStorage.setItem(\"mySongs\",JSON.stringify(songs));}};console.log(songYouTube);console.log(search,lyric,bio);var favId=function favId(id){console.log(\"this is favId function\",id);var searchData=mySongs.filter(function(song,index){return index===id?song:\"\";});console.log(\"song equal\",searchData);// return song;\nsetFavIdSelected(searchData);setSearch(searchData[0].search);setBio(searchData[0].bio);setLyric(searchData[0].lyric);console.log(searchData[0].songYouTube);setSongYouTube(searchData[0].songYouTube);};console.log(search,lyric,bio,songYouTube);console.log(\"favIdSelected\",favIdSelected);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(HashRouter,{children:[/*#__PURE__*/_jsx(\"img\",{className:\"logo\",src:Logo,alt:\"Music logo\"}),/*#__PURE__*/_jsx(\"div\",{className:\"container mt-5 carousel\",children:/*#__PURE__*/_jsx(FavSongTable,{mySongs:mySongs,handleDeleteSong:handleDeleteSong,favId:favId})}),/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"selected\",children:/*#__PURE__*/_jsx(\"img\",{className:\"homeIcon\",src:HomeLogo,alt:\"home\"})})}),/*#__PURE__*/_jsx(\"article\",{children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsxs(Route,{exact:true,path:\"/\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Song Search\"}),/*#__PURE__*/_jsx(SongForm,{handleSearch:handleSearch,handleSaveSong:handleSaveSong// songs={song}\n}),loading&&/*#__PURE__*/_jsx(Loader,{}),search&&!loading&&/*#__PURE__*/_jsx(SongDetails,{search:search,lyric:lyric,bio:bio,songYouTube:songYouTube,favId:favIdSelected,youTubeId:youTubeId})]}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/:id\",children:/*#__PURE__*/_jsx(SongPage,{mySongs:mySongs})}),/*#__PURE__*/_jsx(Route,{path:\"*\",children:/*#__PURE__*/_jsx(Error404,{})})]})}),/*#__PURE__*/_jsx(Footer,{})]})});};export default SongSearch;","map":{"version":3,"sources":["/Users/pipemv/Desktop/final-project/src/components/SongSearch.js"],"names":["React","useState","useEffect","HashRouter","Link","Switch","Route","FavSongTable","SongDetails","SongForm","SongPage","Loader","helpHttp","Error404","Logo","HomeLogo","Footer","YOUTUBE_API","process","env","REACT_APP_YOUTUBE_API_KEY","mySongsInit","JSON","parse","localStorage","getItem","SongSearch","search","setSearch","lyric","setLyric","bio","setBio","youTubeId","setYouTubeId","mySongs","setMySongs","loading","setLoading","songYouTube","setSongYouTube","favIdSelected","setFavIdSelected","console","log","fetchData","artist","song","artistUrl","songUrl","playerSearch","Promise","all","get","artistRes","songRes","err","artists","playerRes","items","id","videoId","setItem","stringify","handleSearch","data","handleSaveSong","alert","currentSong","songs","handleDeleteSong","isDelete","window","confirm","filter","index","favId","searchData"],"mappings":"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","sourcesContent":["// import { SongTest } from \"./DataTes\";\nimport React, { useState } from \"react\";\nimport { useEffect } from \"react\";\nimport { HashRouter, Link, Switch, Route } from \"react-router-dom\";\nimport FavSongTable from \"./FavSongsTable\";\nimport SongDetails from \"./SongDetails\";\nimport SongForm from \"./SongForm\";\nimport SongPage from \"./SongPage\";\nimport Loader from \"../images/Loader\";\nimport { helpHttp } from \"../helpers/helpHttp\";\n// import _ from \"lodash\";\nimport Error404 from \"../pages/Error404\";\n// import ImageSlider from \"./Slider\";\nimport \"../css/App.css\";\nimport Logo from \"../images/Logo.png\";\nimport HomeLogo from \"../images/home2.png\";\nimport Footer from \"./Footer\";\n\n// console.log(process.env);\nconst YOUTUBE_API = process.env.REACT_APP_YOUTUBE_API_KEY;\nconst mySongsInit = JSON.parse(localStorage.getItem(\"mySongs\")) || [];\n\n// console.log(SongTest.items[0]);\n\nconst SongSearch = () => {\n  //Controls the singer and song search, if there's not singer or song it will be kept \"null\" in order to not show the artist\n  const [search, setSearch] = useState(null);\n  //Handles the lyric of the artist's song\n  const [lyric, setLyric] = useState(null);\n  //Handles the information of the artist\n  const [bio, setBio] = useState(null);\n  //Handles the informatin about the YouTube id\n  const [youTubeId, setYouTubeId] = useState(null);\n  //Saves my song to my favorites\n  const [mySongs, setMySongs] = useState(mySongsInit);\n  //Handles the loading cirlce image\n  const [loading, setLoading] = useState(false);\n  //Handles the YouTube url with the song information\n  const [songYouTube, setSongYouTube] = useState(\"\");\n  //handles the favorite song selected from the carousel\n  const [favIdSelected, setFavIdSelected] = useState(\"\");\n\n  console.log(songYouTube);\n\n  useEffect(() => {\n    if (search === \"\") return;\n\n    const fetchData = async () => {\n      const { artist, song } = search;\n\n      let artistUrl = `https://www.theaudiodb.com/api/v1/json/2/search.php?s=${artist}`;\n      let songUrl = `https://api.lyrics.ovh/v1/${artist}/${song}`;\n\n      let playerSearch = `https://www.googleapis.com/youtube/v3/search?maxResults=1&relevanceLanguage=en&regionCode=AU&topicId=/m/04rlf&part=snippet&q=${artist}%20${song}&key=${YOUTUBE_API}`;\n      \n      console.log(playerSearch);\n      \n\n      setLoading(true);\n      //   fetch(artistUrl)\n      //     .then((res) => res.json())\n      //     .then(\n      //       (result) => {\n      //         console.log(\"Artist is working\");\n      //         // console.log(result);\n      //         setBio(result);\n      //       },\n      //       (error) => {\n      //         console.log(\"There is an error Artist\");\n      //       }\n      //     );\n\n      //   fetch(songUrl)\n      //     .then((res) => res.json())\n      //     .then(\n      //       (result) => {\n      //         console.log(\"Song is working\");\n      //         // console.log(result);\n      //         setLyric(result);\n      //       },\n      //       (error) => {\n      //         console.log(\"There is an error in Song\");\n      //       }\n      //     );\n      // }, [search]);\n      // let songId = \"\"\n      const [artistRes, songRes] = await Promise.all([\n        helpHttp().get(artistUrl),\n        helpHttp().get(songUrl),\n        // helpHttp().get(playerSearch),\n      ]);\n      // console.log(songId);\n      console.log(artistRes, songRes);\n\n      setBio(artistRes);\n      setLyric(songRes);\n\n      if (songRes.err === true || artistRes.artists === null) {\n        console.log(\"error before loading api 1\");\n        setLoading(false);\n        return;\n      }\n\n      const playerRes = await Promise.all([helpHttp().get(playerSearch)]);\n      console.log(playerRes);\n\n      // let songId = _.map(playerRes.items, (video) => {\n      //   if (video.id.kind === \"youtube#video\") {\n      //     console.log(\"something\", video);\n      //     let urlId = `https://www.googleapis.com/youtube/v3/videos?part=snippet,contentDetails,statistics&id=${video.id.videoId}&key=AIzaSyCx0_c96ixoYzQUcp_0tgct7hI-PVoO6EU`;\n      //     // let urlId = SongTest\n      //     console.log(urlId);\n      //     return urlId;\n      //   }\n      // });\n\n      // const idRes = await Promise.all([helpHttp().get(songId)]);\n      // console.log(songId);\n\n      // console.log(idRes);\n      // setSongYouTube(idRes);\n\n      setSongYouTube(playerRes[0]);\n      setYouTubeId(playerRes[0].items[0].id.videoId);\n      setLoading(false);\n    };\n    fetchData();\n    localStorage.setItem(\"mySongs\", JSON.stringify(mySongs));\n  }, [search, mySongs]);\n  // }, []);\n\n  console.log(songYouTube);\n  // const video = (song) => {\n  //   if (song === null) {\n  //     return;\n  //   } else if (song !== null) {\n  //     song.items.map((item) => {\n  //       console.log(\"item\", item);\n  //       const { id, snippet = {} } = item;\n  //       const { title, thumbnails = {}, resourceId } = snippet;\n  //       const { medium = {} } = thumbnails;\n  //       return (\n  //       <li key={id}>\n  //         <a href={`https://www.youtube.com/watch?v=${resourceId.videoId}`}>\n  //           <p>\n  //             <img width={medium.width} height={medium.height} src={medium.url} alt={`${search.artist} ${search.song}`} />\n  //           </p>\n  //           <h3>{title}</h3>\n  //         </a>\n  //       </li>);\n  //     });\n  //     const video = song.items;\n  //     console.log(video);\n  //     //  const videoSrc = `https://www.youtube.com/embed/${video.id.videoId}`\n  //   }\n  // };\n\n  const handleSearch = (data) => {\n    console.log(data);\n    setSearch(data);\n  };\n\n  console.log(search);\n  console.log(lyric);\n  console.log(bio);\n  console.log(youTubeId);\n\n  const handleSaveSong = () => {\n    if (lyric.err === true || bio.artists === null) {\n      return alert(\"The song can not be saved, Try it again!\");\n    }\n\n    // console.log(\"saving the song to favorites\");\n    let currentSong = {\n      search,\n      lyric,\n      bio,\n      songYouTube,\n    };\n\n    let songs = [...mySongs, currentSong];\n    setMySongs(songs);\n    // setSearch(null);\n    localStorage.setItem(\"mySongs\", JSON.stringify(songs));\n  };\n\n  const handleDeleteSong = (id) => {\n    let isDelete = window.confirm(\n      `¿Are you sure of deleting this wonderful song?`\n    );\n\n    if (isDelete) {\n      let songs = mySongs.filter((song, index) => index !== id);\n      setMySongs(songs);\n      localStorage.setItem(\"mySongs\", JSON.stringify(songs));\n    }\n  };\n  console.log(songYouTube);\n\n  console.log(search, lyric, bio);\n\n  const favId = (id) => {\n    console.log(\"this is favId function\", id);\n    let searchData = mySongs.filter((song, index) =>\n      index === id ? song : \"\"\n    );\n    console.log(\"song equal\", searchData);\n    // return song;\n\n    setFavIdSelected(searchData);\n    setSearch(searchData[0].search);\n    setBio(searchData[0].bio);\n    setLyric(searchData[0].lyric);\n    console.log(searchData[0].songYouTube);\n    setSongYouTube(searchData[0].songYouTube);\n  };\n  console.log(search, lyric, bio, songYouTube);\n  console.log(\"favIdSelected\", favIdSelected);\n  return (\n    <div>\n      <HashRouter>\n        <img className=\"logo\" src={Logo} alt=\"Music logo\"></img>\n\n        <div className=\"container mt-5 carousel\">\n          <FavSongTable\n            mySongs={mySongs}\n            handleDeleteSong={handleDeleteSong}\n            favId={favId}\n          />\n        </div>\n\n        <header>\n          <Link to=\"/\" className=\"selected\">\n            <img className=\"homeIcon\" src={HomeLogo} alt=\"home\" />\n          </Link>\n        </header>\n        {/* {song} */}\n        <article>\n          <Switch>\n            <Route exact path=\"/\">\n              <h2>Song Search</h2>\n              <SongForm\n                handleSearch={handleSearch}\n                handleSaveSong={handleSaveSong}\n                // songs={song}\n              />\n              {loading && <Loader />}\n              {search && !loading && (\n                <SongDetails\n                  search={search}\n                  lyric={lyric}\n                  bio={bio}\n                  songYouTube={songYouTube}\n                  favId={favIdSelected}\n                  youTubeId={youTubeId}\n                />\n              )}\n            </Route>\n            <Route\n              exact\n              path=\"/:id\"\n              children={<SongPage mySongs={mySongs} />}\n            ></Route>\n            <Route path=\"*\" children={<Error404 />} />\n          </Switch>\n        </article>\n        <Footer />\n      </HashRouter>\n    </div>\n  );\n};\n\nexport default SongSearch;\n"]},"metadata":{},"sourceType":"module"}